/* Enable captions on iOS with JW Player ~ version 1.0 ~ October 2015, Copyright (c) James Herrieven ~ http://powered-by-haiku.co.uk
 * Licensed under The MIT License.
 * v1.1 ~ November 2015 ~ Update to auto-resolve cross-domain / CORS issues
 * v1.2 ~ December 2015 ~ Target iOS safari only
*/
!function(i){var t=function(t,e,o){function a(t){var e=t.container||t.getContainer();if(i.utils.isIOS()&&i.utils.isSafari()&&i.utils.isMobile()&&!i.utils.isIPad()){var o=e.getElementsByTagName("video")[0];o&&(o.getAttribute("crossorigin")||o.setAttribute("crossorigin","anonymous"))}}function r(i){return i&&i.indexOf("://")>=0&&i.split("/")[2]!=window.location.href.split("/")[2]}function n(t){var o=t.container||t.getContainer();if(i.utils.isIOS()&&i.utils.isSafari()&&i.utils.isMobile()&&!i.utils.isIPad()){var a=o.getElementsByTagName("video")[0];if(a){console.info("removing");var n=a.getElementsByTagName("track");if(n)for(var l=n.length,c=0;l>=c;l--)n[l]&&a.removeChild(n[l]);var u=t.getPlaylistItem();if(u&&u.tracks&&u.tracks.length>0)for(var l in u.tracks){var f=u.tracks[l],v=document.createElement("track");for(var d in f)if("data"!=d&&"id"!=d){var g="file"==d?"src":d,m=f[d];if("file"==d&&e.xdcors===!0)var m=r(f[d])?top.location.protocol+"//www.dev."+s[2]+"/"+s[1]+"/"+s[3]+"/"+s[0]+"/?dom="+top.location.hostname+"&file="+f[d]:f[d];("default"!=d||"default"==d&&(f[d]===!0||"true"===f[d]))&&v.setAttribute(g,m)}a.appendChild(v)}}}}var s=["xdcors","solutions","powered-by-haiku.co.uk","jwioscaptions"];t.onReady(function(){a(t)}),t.onPlay(function(){n(t)}),this.about={label:"Enable captions on iOS with JW Player",version:"v1.2 ~ December 2015",author:"James Herrieven ~ http://powered-by-haiku.co.uk"}};i().registerPlugin("jwioscaptions","6.0",t)}(jwplayer);